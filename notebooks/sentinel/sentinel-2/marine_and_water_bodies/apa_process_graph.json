{
  "process_graph": {
    "loadcollection1": {
      "process_id": "load_collection",
      "arguments": {
        "bands": [
          "B02_10m",
          "B03_10m",
          "B04_10m",
          "B05_20m",
          "B08_10m",
          "B8A_20m",
          "B11_20m"
        ],
        "id": "sentinel-2-l2a",
        "properties": {
          "eo:cloud_cover": {
            "process_graph": {
              "lte1": {
                "process_id": "lte",
                "arguments": {
                  "x": {
                    "from_parameter": "value"
                  },
                  "y": 35
                },
                "result": true
              }
            }
          }
        },
        "spatial_extent": {
          "west": 103.5,
          "south": 12.8,
          "east": 104.5,
          "north": 13.5
        },
        "temporal_extent": [
          "2023-08-10",
          "2023-10-31"
        ]
      }
    },
    "reducedimension1": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "loadcollection1"
        },
        "dimension": "t",
        "reducer": {
          "process_graph": {
            "first1": {
              "process_id": "first",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "resamplespatial1": {
      "process_id": "resample_spatial",
      "arguments": {
        "align": "upper-left",
        "data": {
          "from_node": "reducedimension1"
        },
        "method": "near",
        "projection": null,
        "resolution": [
          100,
          100
        ]
      }
    },
    "applydimension1": {
      "process_id": "apply_dimension",
      "arguments": {
        "data": {
          "from_node": "resamplespatial1"
        },
        "dimension": "spectral",
        "process": {
          "process_graph": {
            "arrayelement1": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 2
              }
            },
            "divide1": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "arrayelement1"
                },
                "y": 10000.0
              }
            },
            "multiply1": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_node": "divide1"
                },
                "y": 3
              }
            },
            "arrayelement2": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 1
              }
            },
            "divide2": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "arrayelement2"
                },
                "y": 10000.0
              }
            },
            "multiply2": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_node": "divide2"
                },
                "y": 3
              }
            },
            "arrayelement3": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 0
              }
            },
            "divide3": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "arrayelement3"
                },
                "y": 10000.0
              }
            },
            "multiply3": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_node": "divide3"
                },
                "y": 3
              }
            },
            "arraycreate1": {
              "process_id": "array_create",
              "arguments": {
                "data": [
                  {
                    "from_node": "multiply1"
                  },
                  {
                    "from_node": "multiply2"
                  },
                  {
                    "from_node": "multiply3"
                  }
                ]
              }
            },
            "arrayelement4": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 4
              }
            },
            "divide4": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "arrayelement4"
                },
                "y": 10000.0
              }
            },
            "arrayelement5": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 6
              }
            },
            "divide5": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "arrayelement5"
                },
                "y": 10000.0
              }
            },
            "subtract1": {
              "process_id": "subtract",
              "arguments": {
                "x": {
                  "from_node": "divide5"
                },
                "y": {
                  "from_node": "divide1"
                }
              }
            },
            "multiply4": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_node": "subtract1"
                },
                "y": 0.17722052470761768
              }
            },
            "add1": {
              "process_id": "add",
              "arguments": {
                "x": {
                  "from_node": "divide1"
                },
                "y": {
                  "from_node": "multiply4"
                }
              }
            },
            "subtract2": {
              "process_id": "subtract",
              "arguments": {
                "x": {
                  "from_node": "divide4"
                },
                "y": {
                  "from_node": "add1"
                }
              }
            },
            "multiply5": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_node": "subtract2"
                },
                "y": 8.5
              }
            },
            "arrayelement6": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 3
              }
            },
            "divide6": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "arrayelement6"
                },
                "y": 10000.0
              }
            },
            "subtract3": {
              "process_id": "subtract",
              "arguments": {
                "x": {
                  "from_node": "divide6"
                },
                "y": {
                  "from_node": "divide1"
                }
              }
            },
            "add2": {
              "process_id": "add",
              "arguments": {
                "x": {
                  "from_node": "divide6"
                },
                "y": {
                  "from_node": "divide1"
                }
              }
            },
            "divide7": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "subtract3"
                },
                "y": {
                  "from_node": "add2"
                }
              }
            },
            "multiply6": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_node": "divide7"
                },
                "y": 5.5
              }
            },
            "subtract4": {
              "process_id": "subtract",
              "arguments": {
                "x": {
                  "from_node": "divide2"
                },
                "y": {
                  "from_node": "divide4"
                }
              }
            },
            "add3": {
              "process_id": "add",
              "arguments": {
                "x": {
                  "from_node": "divide2"
                },
                "y": {
                  "from_node": "divide4"
                }
              }
            },
            "divide8": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "subtract4"
                },
                "y": {
                  "from_node": "add3"
                }
              }
            },
            "multiply7": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_node": "divide8"
                },
                "y": 1
              }
            },
            "arraycreate2": {
              "process_id": "array_create",
              "arguments": {
                "data": [
                  {
                    "from_node": "multiply5"
                  },
                  {
                    "from_node": "multiply6"
                  },
                  {
                    "from_node": "multiply7"
                  }
                ]
              }
            },
            "arrayelement7": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 5
              }
            },
            "divide9": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "arrayelement7"
                },
                "y": 10000.0
              }
            },
            "subtract5": {
              "process_id": "subtract",
              "arguments": {
                "x": {
                  "from_node": "divide9"
                },
                "y": {
                  "from_node": "divide5"
                }
              }
            },
            "add4": {
              "process_id": "add",
              "arguments": {
                "x": {
                  "from_node": "divide9"
                },
                "y": {
                  "from_node": "divide5"
                }
              }
            },
            "divide10": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "subtract5"
                },
                "y": {
                  "from_node": "add4"
                }
              }
            },
            "subtract6": {
              "process_id": "subtract",
              "arguments": {
                "x": {
                  "from_node": "divide8"
                },
                "y": {
                  "from_node": "divide10"
                }
              }
            },
            "add5": {
              "process_id": "add",
              "arguments": {
                "x": {
                  "from_node": "divide8"
                },
                "y": {
                  "from_node": "divide10"
                }
              }
            },
            "divide11": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "subtract6"
                },
                "y": {
                  "from_node": "add5"
                }
              }
            },
            "gt1": {
              "process_id": "gt",
              "arguments": {
                "x": {
                  "from_node": "divide11"
                },
                "y": 0
              }
            },
            "if1": {
              "process_id": "if",
              "arguments": {
                "accept": {
                  "from_node": "arraycreate1"
                },
                "reject": {
                  "from_node": "arraycreate2"
                },
                "value": {
                  "from_node": "gt1"
                }
              }
            },
            "lt1": {
              "process_id": "lt",
              "arguments": {
                "x": {
                  "from_node": "divide8"
                },
                "y": 0
              }
            },
            "if2": {
              "process_id": "if",
              "arguments": {
                "accept": {
                  "from_node": "if1"
                },
                "reject": {
                  "from_node": "arraycreate2"
                },
                "value": {
                  "from_node": "lt1"
                }
              }
            },
            "gt2": {
              "process_id": "gt",
              "arguments": {
                "x": {
                  "from_node": "divide5"
                },
                "y": 0.1
              }
            },
            "subtract7": {
              "process_id": "subtract",
              "arguments": {
                "x": {
                  "from_node": "divide2"
                },
                "y": 0.175
              }
            },
            "divide12": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "subtract7"
                },
                "y": 0.21500000000000002
              }
            },
            "gt3": {
              "process_id": "gt",
              "arguments": {
                "x": {
                  "from_node": "divide12"
                },
                "y": 0
              }
            },
            "subtract8": {
              "process_id": "subtract",
              "arguments": {
                "x": {
                  "from_node": "divide2"
                },
                "y": {
                  "from_node": "divide1"
                }
              }
            },
            "add6": {
              "process_id": "add",
              "arguments": {
                "x": {
                  "from_node": "divide2"
                },
                "y": {
                  "from_node": "divide1"
                }
              }
            },
            "divide13": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "subtract8"
                },
                "y": {
                  "from_node": "add6"
                }
              }
            },
            "gt4": {
              "process_id": "gt",
              "arguments": {
                "x": {
                  "from_node": "divide13"
                },
                "y": 0
              }
            },
            "and1": {
              "process_id": "and",
              "arguments": {
                "x": {
                  "from_node": "gt3"
                },
                "y": {
                  "from_node": "gt4"
                }
              }
            },
            "and2": {
              "process_id": "and",
              "arguments": {
                "x": {
                  "from_node": "gt2"
                },
                "y": {
                  "from_node": "and1"
                }
              }
            },
            "if3": {
              "process_id": "if",
              "arguments": {
                "accept": {
                  "from_node": "arraycreate1"
                },
                "reject": {
                  "from_node": "if2"
                },
                "value": {
                  "from_node": "and2"
                }
              }
            },
            "gt5": {
              "process_id": "gt",
              "arguments": {
                "x": {
                  "from_node": "divide5"
                },
                "y": 0.1
              }
            },
            "gt6": {
              "process_id": "gt",
              "arguments": {
                "x": {
                  "from_node": "divide12"
                },
                "y": 1
              }
            },
            "and3": {
              "process_id": "and",
              "arguments": {
                "x": {
                  "from_node": "gt5"
                },
                "y": {
                  "from_node": "gt6"
                }
              }
            },
            "if4": {
              "process_id": "if",
              "arguments": {
                "accept": {
                  "from_node": "arraycreate1"
                },
                "reject": {
                  "from_node": "if3"
                },
                "value": {
                  "from_node": "and3"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "apply1": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "applydimension1"
        },
        "process": {
          "process_graph": {
            "linearscalerange1": {
              "process_id": "linear_scale_range",
              "arguments": {
                "inputMax": 1,
                "inputMin": 0,
                "outputMax": 255,
                "outputMin": 0,
                "x": {
                  "from_parameter": "x"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "apply2": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "apply1"
        },
        "process": {
          "process_graph": {
            "trunc1": {
              "process_id": "trunc",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "saveresult1": {
      "process_id": "save_result",
      "arguments": {
        "data": {
          "from_node": "apply2"
        },
        "format": "GTiff",
        "options": {}
      },
      "result": true
    }
  },
  "parameters": [
    {
      "name": "bands",
      "description": "Sentinel-2 bands required for APA calculation",
      "schema": {},
      "default": [
        "B02_10m",
        "B03_10m",
        "B04_10m",
        "B05_20m",
        "B08_10m",
        "B8A_20m",
        "B11_20m"
      ],
      "optional": true
    }
  ],
  "id": "apa_aquatic_plants_algae",
  "summary": "Aquatic Plants and Algae Detection using Sentinel-2",
  "description": "Detects and visualizes aquatic plants and algae in water bodies using spectral indices including FAI and water plants index. Based on the APA script by University of Girona."
}